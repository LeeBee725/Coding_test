# [PRlv1]당구 연습

<!-- 작성완료 후 문제 유형 및 핵심 알고리즘을 해시 태그로 기입 또 다른 문제 풀이 방식이 있을 경우, 구분해서 기입 -->
> #tag #tag #tag
>
> #tagOther

## 문제 분석

<!--문제에서 요구하고 제한하는 모든 것들을 정리 자유로운 형태로 기입-->
### 요구사항

- 가로 m 세로 n 당구대 => 이차원 배열
- 3 <= m, n <= 1000
- 큐대로 칠 당구공 좌표 0 < startX < m, 0 < startY < n
- 쳐야할 당구공 좌표가 balls에 있음, 2 <= balls 길이 <= 1000
- balls의 원소는 [a, b] 형태 a가 x좌표 0 < a < m, 0 < b < n
- a = startX, b = startY인 입력은 들어오지 않는다.
- 벽에 부딪힐 때 진행 방향은 항상 입사각과 반사각이 동일
- 꼭짓점에 부딪힐 경우에는 진방향의 반대방향으로 진행
- 공 크기 무시
- 두 공의 좌표가 일치할 경우 맞았다고 판단
- 공이 목표 공에 맞기전에 멈추는 공은 없다.
- 목표공에 맞으면 바로 멈춤

<!--자유롭게 메모하는 식으로 풀이법에 대한 사고를 정리(중요)-->
### 사고과정

1. 각 모서리를 기준으로 칠공을 대칭이동 시킨다.
2. 대칭이동된 점과 맞혀야하는 공을 잇는 선의 길이를 구한다.
   1. 대칭이동의 기준이 된 모서리와 직교하고 대칭이동한 점을 지나는 직선과 맞혀야하는 공의 좌표를 지나고 모서리와 평행한 직선이 만나는 교점을 구한다.
   2. 교점으로부터 대칭이동 된 점까지의 거리를 구한다.
   3. 교점으로부터 맞혀야하는 좌표까지의 거리를 구한다.
   4. 두 거리를 각각 제곱하여 더한다.
3. 구해진 길이가 최소가 되는 값을 찾는다.

- 1번 과정을 통해 각 모서리에 대해 알고리즘을 4번 돌린다.
- 선의 길이를 구하기 위해 대칭이동된 점과 교점을 구해야한다.
  - 대칭이동된 점은 각 모서리에서부터 점이 떨어진 최소 거리를 모서리 바깥방향으로 이동한다. 3,7 => -3,7
  - 교점은 점이 칠 공(x1, y1), 맞힐 공(x2, y2) 일 때
    - y축과 평행한 모서리일 경우 (x2, y1)이다.
    - x축과 평행한 모서리 일 경우 (x1, y2)이다.

- 위의 과정은 벽에 아직 맞지 않은 칠공의 진행경로에 공이 있을 경우에 대해 구분하지 못한다.
<!--문제 풀이 시도에 대한 정보를 기록 성공/실패 여부와 실패시 실패 원인 실패 이유 등 기입-->
## 1차시도

[성공]

**<red>75분 경과</red>**

중간에 교점을 굳이 구할 필요가 없었다는 것을 깨달았다.

단순하게 **대칭이동된 좌표를 구하고 맞힐 공 좌표와의 거리를 구하면된다.**

---

각 모서리에서 가장 최단 거리로 원쿠션을 시도하는 진행 경로에 맞힐 공이 있는 경우를 배제해야했다.

이 과정에서 조건문을 세우는게 어려웠다.

진행 경로 위에 존재하는 맞힐 공을 찾기 위해 처음에는 직선의 기울기를 생각했으나 ZeroDivision 문제가 발생했다.

**벽에 튀길때 입사각과 반사각이 같으므로 벽에 직교하여 튀기는 경우만 진행경로를 판단**하면 된다. 즉 **x좌표 혹은 y좌표가 같고 모서리와 칠 공 사이에 맞힐 공이 존재한다면 후보로 넣지 않게**하며 문제를 해결했다.

<style>
    red {color: red;}
    green {color: red;}
    yellow {color: red;}
    blue {color: blue;}
</style>
